{
  "originalPath": "src\\components\\SpendingChart.tsx",
  "timestamp": "2025-09-22T21:18:43.842Z",
  "hash": "a9d126f6466cd78afaf1dd3f5c840ec072f9dbcf3688a7d814417faa285b14b2",
  "size": 2890,
  "content": "import React from 'react';\r\n\r\ntype SpendingData = {\r\n  category: string;\r\n  amount: number;\r\n  budget: number;\r\n};\r\n\r\ntype SpendingChartProps = {\r\n  data: SpendingData[];\r\n};\r\n\r\nexport const SpendingChart: React.FC<SpendingChartProps> = ({ data }) => {\r\n  // FIX 1: Add a \"guard clause\" to handle cases where data isn't ready yet.\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-2xl font-semibold mb-4 text-gray-800\">Spending Overview</h2>\r\n        <p className=\"text-gray-500\">No spending data available.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      <h2 className=\"text-2xl font-semibold mb-4 text-gray-800\">Spending Overview</h2>\r\n      <table className=\"w-full table-auto mb-4\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"text-left text-gray-600 p-2\">Category</th>\r\n            <th className=\"text-left text-gray-600 p-2\">Spent</th>\r\n            <th className=\"text-left text-gray-600 p-2\">Budget</th>\r\n            <th className=\"text-left text-gray-600 p-2\">Progress</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {data.map((row) => {\r\n            // FIX 2: Safely calculate the percentage, avoiding division by zero.\r\n            const percent =\r\n              row.budget > 0\r\n                ? Math.min(100, Math.round((row.amount / row.budget) * 100))\r\n                : row.amount > 0 ? 100 : 0;\r\n\r\n            return (\r\n              <tr key={row.category}>\r\n                <td className=\"p-2\">{row.category}</td>\r\n                <td className=\"p-2\">${row.amount.toLocaleString()}</td>\r\n                <td className=\"p-2\">${row.budget.toLocaleString()}</td>\r\n                <td className=\"p-2 w-1/2\">\r\n                   {/* This part combines the progress bar and the percentage text for better alignment */}\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-3 mr-2\">\r\n                      <div\r\n                        className={`h-3 rounded-full ${percent < 80 ? 'bg-blue-500' : percent < 100 ? 'bg-yellow-500' : 'bg-red-500'}`}\r\n                        style={{ width: `${percent}%` }}\r\n                      ></div>\r\n                    </div>\r\n                    <span className=\"text-xs text-gray-600 w-10 text-right\">{percent}%</span>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n      <p className=\"text-gray-500 text-sm\">\r\n        <span className=\"font-bold text-blue-500\">Blue</span>: Under budget, <span className=\"font-bold text-yellow-500\">Yellow</span>: Near budget, <span className=\"font-bold text-red-500\">Red</span>: Over budget\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpendingChart;"
}