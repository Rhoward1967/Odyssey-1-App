{
  "originalPath": "SAFEGUARDS.md",
  "timestamp": "2025-09-27T17:00:16.523Z",
  "hash": "c96c22fd1f3b43c88e6ace02860b53e1ded0b8cb7a86e561ebebfa37375de102",
  "size": 1471,
  "content": "# .gitlab-ci.yml or .github/workflows/branch-protection.yml (for reference only)\r\n# Branch protection must be set in your git hosting service UI (GitHub, GitLab, etc.)\r\n# The following are additional local safeguards for your repo.\r\n\r\n# 1. Pre-push hook to prevent pushing from Odyssey-1-testing-lab to main\r\n\r\n# Save this as .husky/pre-push if using Husky, or .git/hooks/pre-push (make executable)\r\n\r\n#!/bin/sh\r\nbranch=$(git rev-parse --abbrev-ref HEAD)\r\nif [ \"$branch\" = \"Odyssey-1-testing-lab\" ]; then\r\n  # Check if pushing to main\r\n  while read local_ref local_sha remote_ref remote_sha; do\r\n    if echo \"$remote_ref\" | grep -q \"/main$\"; then\r\n      echo \"\\033[0;31mERROR: Pushing from Odyssey-1-testing-lab to main is not allowed!\\033[0m\"\r\n      exit 1\r\n    fi\r\n  done\r\nfi\r\nexit 0\r\n\r\n# 2. Add a README warning in the testing lab branch\r\n\r\n---\r\n\r\n# Odyssey-1 Testing Lab Safeguards\r\n\r\n- Pre-push hook prevents accidental pushes from testing lab to main.\r\n- CONTRIBUTING.md documents the workflow and policy.\r\n- Use separate .env files for testing and production.\r\n- Always review changes before merging to Odyssey-1 Lab or main.\r\n\r\n---\r\n\r\n# 3. Reminder: Set up branch protection in your git hosting service UI\r\n#   - Require pull requests for main\r\n#   - Require code review\r\n#   - Disallow direct pushes to main\r\n#   - Optionally, restrict who can merge to main\r\n\r\n# These steps will help keep your main lab safe while allowing you full control in the testing lab.\r\n"
}